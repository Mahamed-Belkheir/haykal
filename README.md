# Haykal
Haykal is a typescript MVC framework, originally designed for generating web application backends, it is flexible enough to work with any project. Haykal generates a loosely coupled project, and is able to generate component templates.

Haykal uses Express and Objection/Knex by default, but it's decoupled and can be replaced by other
equivalent libraries and frameworks.

### How to use
haykal is a cli tool, install it through

`npm i -g haykal`
current available commands are:

- initialize a new project:
    `haykal init --name=project-name`
    only takes a `--name` attribute, which refers to the project name, creates a new folder in the current
    directory, installs dependencies and generates the folders and files and creates the project boilerplate

- generate components:
    `haykal gen -a --name=user --attrs=username:string,password:string`
    takes flag arguments:

       - -a: all
       - -c: controller
       - -r: router
       - -i: model interface
       - -m: model implementation
       - -mi: migration
       
    and attributes argument `--attrs`
    currently supported types: `string`, `number` and `Date`, other types would have to be
    added to the generated code by hand until they're supported.


### Project Structure:

```
 /src
    - /controllers
        - index.ts
    - /dependency
        - index.ts
    - /models
        - /interface
            - base.ts
        - /objection
            - base.ts
    - /tests
        - index.test.ts
    - /services
        - index.ts
    - /application
        - /express
            - index.ts
            - error.ts
            - /api
                - /v1
                    - index.ts
                - index.ts
    - /db
        - /objection
            -index.ts
    - /exceptions
        - index.ts
```

- Controllers:
    handles business logic and rules
- Dependency:
    initializes dependencies and exports them for use
- Models:
    - interface:
        defines a common interface to be implemented by any data access class
    - objection:
        the default implementation generated by Haykal, using Objection.js
- Tests:
    includes all test files
- Application:
    handles all application's access implementations, the default is as a HTTP Server with express,
    but it can also include RPC server, CLI tools and what not.
    - Express:
        the default app implementation as a http server
        - index.ts:
            bootstraps the entire application
        - error.ts:
            generic express error handler
        - api:
            index.ts:
                handles registering all api routes, reads every folder and imports it as router for use(e.g "/v1")
            v1:
                the default api version
                - index.ts:
                    handles registering all routers within its directory
- DB:
    defines DB access configuration files
    - objection:
        the objection/knex config implementation
- Exceptions:
    defines error handling and error classes and functions